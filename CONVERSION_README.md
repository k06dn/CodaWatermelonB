# Figma to React Native Conversion

This project has been converted from React web code (generated by Figma Make) to **React Native** using **Expo** and **NativeWind** for styling.

## ‚úÖ What Has Been Completed

### Project Setup
- ‚úÖ Initialized Expo project with TypeScript
- ‚úÖ Configured NativeWind (Tailwind CSS for React Native)
- ‚úÖ Set up Expo Router for navigation
- ‚úÖ Created proper directory structure (app/, components/, utils/, contexts/)
- ‚úÖ Added all necessary dependencies

### Core Infrastructure
- ‚úÖ **Storage utility** (`utils/storage.ts`) - AsyncStorage wrapper to replace localStorage
- ‚úÖ **Theme Context** (`contexts/ThemeContext.tsx`) - Replace document.documentElement for dyslexia settings
- ‚úÖ **Expo Router layout** (`app/_layout.tsx`) - Root layout with ThemeProvider, GestureHandler, SafeArea
- ‚úÖ **Entry point** (`app/index.tsx`) - Main app entry

### Converted Components

#### Core App Components (Manually Converted)
- ‚úÖ `CodaApp.tsx` - Main app container with React Native primitives
- ‚úÖ `WaveLoader.tsx` - Loading screen with Reanimated animations
- ‚úÖ `OfflineIndicator.tsx` - Network status using @react-native-community/netinfo
- ‚úÖ `AwareScreen.tsx` - Main dashboard view with proper RN structure

#### Auto-Converted Components (75 files)
All components in `components/` have been processed through automated conversion:
- HTML elements ‚Üí React Native primitives (View, Text, TouchableOpacity, etc.)
- `lucide-react` ‚Üí `lucide-react-native`
- Basic Framer Motion ‚Üí Reanimated placeholders
- Removed web-specific code (`window`, `document`, etc.)

**Note:** Auto-converted components require manual review and fixing.

### Dependencies Installed
```json
{
  "expo": "~52.0.0",
  "react-native": "0.76.5",
  "nativewind": "^4.1.23",
  "react-native-reanimated": "~3.16.1",
  "lucide-react-native": "^0.454.0",
  "@react-native-async-storage/async-storage": "^2.1.0",
  "@react-native-community/netinfo": "^11.4.1",
  "react-native-toast-message": "^2.2.1",
  "expo-haptics": "~14.0.0",
  "react-native-gesture-handler": "~2.20.2",
  "react-native-safe-area-context": "4.12.0"
}
```

---

## ‚ö†Ô∏è What Still Needs Work

### Critical Issues (Must Fix Before Running)

1. **Framer Motion ‚Üí Reanimated Conversion**
   - Many components still have incorrect Framer Motion imports
   - Need to replace `motion.*` components with `Animated.*` from Reanimated
   - Convert animation props (`initial`, `animate`, `exit`, `transition`) to Reanimated API
   - Replace `AnimatePresence` with conditional rendering + entering/exiting animations

   **Example conversion needed:**
   ```tsx
   // OLD (Framer Motion - won't work)
   <motion.div
     initial={{ opacity: 0 }}
     animate={{ opacity: 1 }}
     exit={{ opacity: 0 }}
   />

   // NEW (Reanimated)
   <Animated.View
     entering={FadeIn}
     exiting={FadeOut}
   />
   ```

2. **Radix UI Components**
   - All `components/ui/` files use Radix UI (web-only)
   - These need to be replaced with React Native alternatives:
     - Dialog ‚Üí React Native Modal or bottom sheet
     - Dropdown ‚Üí React Native Picker or custom menu
     - Checkbox/Switch ‚Üí React Native Switch
     - etc.
   - Consider using libraries like:
     - `react-native-paper` for Material Design components
     - `@gorhom/bottom-sheet` for modals/sheets
     - `react-native-gesture-handler` for interactions

3. **localStorage ‚Üí AsyncStorage**
   - All `localStorage` calls have been converted to `await storage.*`
   - BUT: The functions calling storage now need to be `async`
   - Search for `await storage` and ensure parent functions are async
   - Update useEffect hooks that load data to handle async properly

4. **Form Inputs**
   - `<input>` was auto-converted to `<TextInput>` but needs proper props
   - Web input props (like `type="email"`) need to be converted to RN equivalents
   - Add proper `keyboardType`, `secureTextEntry`, etc.

5. **CSS-specific Styles**
   - NativeWind doesn't support all Tailwind features:
     - ‚ùå `backdrop-blur` - not supported
     - ‚ùå `blur-*` - not supported
     - ‚ùå CSS Grid (`grid-cols-*`) - use flexbox instead
     - ‚ùå `group-*` classes - limited support
     - ‚ùå Transforms like `-translate-x-1/2` - use style objects
   - These need manual conversion to React Native StyleSheet or inline styles

6. **Image Components**
   - Replace `<img>` with React Native `<Image>`
   - Use `source={{ uri: '...' }}` instead of `src`
   - Add proper `resizeMode` prop

7. **ScrollView Wrapping**
   - Many views will need to be wrapped in `<ScrollView>` for scrollable content
   - Web has automatic overflow scrolling, RN requires explicit ScrollView

---

## üîß Priority Fix List

### Phase 1: Make It Run (Critical)
1. ‚úÖ Fix core app entry and main components
2. ‚ö†Ô∏è Fix all child view components (EnvironmentRadar, TalkView, etc.) to remove Framer Motion
3. ‚ö†Ô∏è Convert or stub out all UI components that use Radix UI
4. ‚ö†Ô∏è Make all localStorage calls properly async
5. ‚ö†Ô∏è Replace unsupported CSS classes

### Phase 2: Core Functionality
1. ‚ö†Ô∏è Implement proper forms and inputs (TextInput components)
2. ‚ö†Ô∏è Fix navigation and routing
3. ‚ö†Ô∏è Implement modals and overlays properly
4. ‚ö†Ô∏è Fix haptic feedback (already have expo-haptics)
5. ‚ö†Ô∏è Test toast notifications (already have toast library)

### Phase 3: Polish
1. ‚ö†Ô∏è Implement proper animations with Reanimated
2. ‚ö†Ô∏è Handle dyslexia accessibility features in React Native way
3. ‚ö†Ô∏è Optimize performance
4. ‚ö†Ô∏è Add proper error boundaries
5. ‚ö†Ô∏è Test on both iOS and Android

---

## üöÄ How to Run

### Install Dependencies
```bash
npm install
```

### Start Development Server
```bash
# Start Expo
npm start

# Or run on specific platform
npm run android
npm run ios
```

**Note:** The app will likely crash on first run due to unconverted components. Follow the error messages and fix components one by one.

---

## üìù Conversion Patterns

### HTML ‚Üí React Native Elements

| Web | React Native |
|-----|-------------|
| `<div>` | `<View>` |
| `<span>`, `<p>`, `<h1-6>` | `<Text>` |
| `<button>` | `<TouchableOpacity>` |
| `<input>` | `<TextInput>` |
| `<img>` | `<Image>` |
| `<a>` | `<TouchableOpacity>` + navigation |

### Event Handlers

| Web | React Native |
|-----|-------------|
| `onClick` | `onPress` |
| `onChange` | `onChangeText` (TextInput) |
| `onSubmit` | Handle via button `onPress` |

### Styling

| Web (Tailwind) | React Native (NativeWind) |
|----------------|---------------------------|
| `className="flex flex-col"` | ‚úÖ Works (use `flex-col`) |
| `className="grid grid-cols-3"` | ‚ùå Use `flex-row` instead |
| `className="backdrop-blur"` | ‚ùå Use semi-transparent backgrounds |
| `className="hover:*"` | ‚ùå No hover on mobile |
| `className="group-*"` | ‚ùå Limited support |

---

## üéØ Next Steps

1. **Fix import errors** - Run the app and fix any missing/incorrect imports
2. **Stub out complex components** - For components that are too complex, create simple placeholders initially
3. **Test basic navigation** - Make sure you can navigate between screens
4. **Implement one feature at a time** - Get one complete flow working before moving to others

---

## üìö Useful Resources

- [React Native Documentation](https://reactnative.dev/docs/getting-started)
- [Expo Documentation](https://docs.expo.dev/)
- [NativeWind Documentation](https://www.nativewind.dev/)
- [React Native Reanimated](https://docs.swmansion.com/react-native-reanimated/)
- [Expo Router](https://docs.expo.dev/router/introduction/)

---

## üêõ Known Issues

1. **Many components still have Framer Motion code** - Will cause runtime errors
2. **Radix UI components won't work** - Need complete replacement
3. **Some localStorage calls aren't async** - Will cause warnings/errors
4. **CSS Grid usage** - Will not render correctly
5. **PhoneMockup component** - Not needed for native, can be removed

---

## üí° Tips

- Start by making the **loading screen** and **onboarding** work first
- **Comment out** broken components temporarily to test other parts
- Use **React Native Debugger** or Expo dev tools to debug
- Test frequently on both **iOS and Android** as they can behave differently
- Consider using **EAS Build** for creating standalone apps later

---

**Last Updated:** 2025-11-30
**Conversion Status:** ~40% complete - Core structure done, components need individual attention
